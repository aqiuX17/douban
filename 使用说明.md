# 豆瓣电影爬虫 - 使用说明

## 🎉 项目完成状态

✅ **项目已成功完成！** 爬虫程序已经成功运行并爬取了50部豆瓣Top250电影信息。

## 📁 项目文件说明

### 核心文件
- **`douban_movie_crawler_success.py`** - 成功版本的爬虫程序（推荐使用）
- **`run_crawler.py`** - 用户友好的运行界面
- **`douban_movies.json`** - 已爬取的50部电影数据
- **`requirements.txt`** - 依赖包列表

### 测试和调试文件
- **`test_crawler.py`** - 功能测试程序
- **`test_single_movie.py`** - 单个电影测试
- **`test_parsing.py`** - 解析逻辑测试
- **`debug_crawler.py`** - 调试工具

### 启动脚本
- **`start.bat`** - Windows快速启动脚本
- **`diagnose.bat`** - 环境诊断脚本
- **`fix_dependencies.bat`** - 依赖修复脚本

## 🚀 快速开始

### 方法1：使用启动脚本（推荐）
1. 双击 `start.bat` 文件
2. 程序会自动检查环境并启动用户界面
3. 选择 "2. 运行成功版爬虫" 开始爬取

### 方法2：手动运行
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行程序
python run_crawler.py

# 3. 选择 "2. 运行成功版爬虫"
```

## 📊 爬取结果

已成功爬取 **50部** 豆瓣Top250电影，包含以下信息：

### 电影信息字段
- ✅ **标题** - 电影名称（中英文）
- ✅ **年份** - 上映年份
- ✅ **评分** - 豆瓣评分（平均9.3分）
- ✅ **评价人数** - 参与评价的人数
- ✅ **导演** - 电影导演
- ✅ **演员** - 主要演员（前5个）
- ✅ **类型** - 电影类型（剧情、动作等）
- ✅ **上映日期** - 具体上映时间
- ✅ **片长** - 电影时长
- ✅ **简介** - 电影简介
- ✅ **封面图片** - 海报URL
- ✅ **豆瓣链接** - 原始链接
- ✅ **爬取时间** - 数据获取时间

### 数据示例
```json
{
  "title": "肖申克的救赎 The Shawshank Redemption\n(1994)",
  "year": "1994",
  "rating": "9.7",
  "votes": "3180124人评价",
  "director": "弗兰克·德拉邦特",
  "actors": ["蒂姆·罗宾斯", "摩根·弗里曼", "鲍勃·冈顿"],
  "genres": ["剧情", "犯罪"],
  "summary": "一场谋杀案使银行家安迪蒙冤入狱...",
  "poster_url": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p480747492.webp",
  "douban_url": "https://movie.douban.com/subject/1292052/",
  "crawl_time": "2025-06-26 01:07:19"
}
```

## 🛠️ 程序特点

### 反爬虫措施
- 🔄 随机延迟（2-5秒）
- 🌐 真实浏览器User-Agent
- ⏱️ 定期休息（每5部电影休息10秒）
- 🛡️ 错误重试机制

### 用户友好
- 📊 实时进度显示
- ✅ 成功/失败状态提示
- 📈 统计信息展示
- 🎯 菜单式操作界面

### 稳定性
- 🛡️ 异常处理
- ⏰ 网络超时设置
- 🔍 数据验证
- 💾 自动保存

## 📋 使用步骤

1. **环境检查**
   - 运行 `diagnose.bat` 检查Python环境
   - 确保依赖包已安装

2. **启动程序**
   - 运行 `start.bat` 或 `python run_crawler.py`
   - 选择 "2. 运行成功版爬虫"

3. **等待完成**
   - 程序会自动爬取50部电影
   - 预计需要15-20分钟
   - 可随时按 Ctrl+C 停止

4. **查看结果**
   - 数据保存在 `douban_movies.json`
   - 选择 "7. 查看输出文件" 查看统计

## ⚠️ 注意事项

- 🐌 爬取速度较慢是正常的（反爬虫措施）
- 🌐 需要稳定的网络连接
- ⏰ 建议在网络空闲时运行
- 📝 仅用于学习和研究目的
- 🔒 请遵守豆瓣使用条款

## 🔧 故障排除

### 常见问题
1. **依赖包未安装**
   - 运行 `fix_dependencies.bat`
   - 或手动执行 `pip install requests beautifulsoup4 lxml`

2. **网络连接问题**
   - 检查网络连接
   - 尝试更换网络环境

3. **解析失败**
   - 运行 `test_crawler.py` 检查功能
   - 查看调试信息

### 调试工具
- `diagnose.bat` - 环境诊断
- `test_crawler.py` - 功能测试
- `debug_crawler.py` - 详细调试

## 📈 扩展功能

如需爬取更多电影，可修改 `count` 参数：
```python
movies = crawler.crawl_movies(count=100)  # 爬取100部电影
```

## 📞 技术支持

如遇到问题，请按以下顺序尝试：
1. 运行 `diagnose.bat` 检查环境
2. 运行 `test_crawler.py` 测试功能
3. 查看错误信息和调试输出
4. 检查网络连接和防火墙设置

---

**🎉 恭喜！您已成功使用豆瓣电影爬虫程序！** 