# 豆瓣电影无上限爬虫使用说明

## 概述

这是一个专门用于爬取豆瓣电影信息的无上限爬虫程序，可以爬取数千部电影信息，包括：

- Top250电影
- 40+个热门标签的电影
- 支持自定义标签爬取
- 自动去重功能
- 断点续爬功能

## 文件说明

- `douban_movie_crawler_unlimited.py` - 主要的爬虫程序
- `run_unlimited_crawler.py` - 启动脚本
- `run_unlimited.bat` - Windows批处理启动文件
- `douban_movies_unlimited.json` - 爬取结果保存文件
- `crawled_urls_unlimited.json` - 已爬取URL记录文件

## 功能特点

### 1. 多种爬取模式
- **Top250模式**: 爬取豆瓣Top250电影
- **标签模式**: 爬取指定标签的电影
- **全量模式**: 爬取所有热门标签的电影
- **自定义模式**: 灵活配置爬取参数

### 2. 反爬虫措施
- 随机延时（1-5秒）
- 模拟真实浏览器请求头
- 分页爬取，避免一次性请求过多
- 自动休息机制

### 3. 数据完整性
- 电影标题、年份、评分
- 导演、演员、类型
- 上映日期、片长、简介
- 封面图片URL
- 豆瓣链接

### 4. 智能管理
- 自动去重，避免重复爬取
- 断点续爬，支持中断后继续
- 进度保存，记录已爬取URL
- 详细统计信息

## 使用方法

### 方法一：使用批处理文件（推荐）
1. 双击运行 `run_unlimited.bat`
2. 按照提示选择爬取模式
3. 等待爬取完成

### 方法二：直接运行Python脚本
```bash
python run_unlimited_crawler.py
```

### 方法三：导入使用
```python
from douban_movie_crawler_unlimited import DoubanMovieCrawlerUnlimited

crawler = DoubanMovieCrawlerUnlimited()
movies = crawler.crawl_all_movies()
```

## 爬取模式详解

### 1. Top250模式
- 爬取豆瓣Top250电影
- 固定250部电影
- 速度较快，适合快速获取高质量电影

### 2. 标签模式
- 爬取指定标签的电影
- 支持自定义页数限制
- 推荐标签：热门、最新、经典、豆瓣高分等

### 3. 全量模式（无上限）
- 爬取所有40+个热门标签
- 每个标签最多30页（约600部电影）
- 预计可爬取数千部电影
- 耗时较长，建议分批进行

### 4. 自定义模式
- 灵活选择爬取来源
- 可自定义标签和页数
- 适合特定需求

## 热门标签列表

程序内置了40+个热门标签：

**地区标签**: 华语、欧美、韩国、日本
**类型标签**: 动作、喜剧、爱情、科幻、悬疑、恐怖、动画、纪录片
**特色标签**: 热门、最新、经典、可播放、豆瓣高分、冷门佳片
**其他标签**: 音乐、歌舞、家庭、儿童、传记、历史、战争等

## 输出文件

### 1. douban_movies_unlimited.json
包含所有爬取的电影信息，格式如下：
```json
{
  "title": "电影标题",
  "year": "年份",
  "rating": "评分",
  "votes": "评价人数",
  "director": "导演",
  "actors": ["演员1", "演员2"],
  "genres": ["类型1", "类型2"],
  "release_date": "上映日期",
  "runtime": "片长",
  "summary": "简介",
  "poster_url": "封面图片URL",
  "douban_url": "豆瓣链接",
  "crawl_time": "爬取时间"
}
```

### 2. crawled_urls_unlimited.json
记录已爬取的电影URL，用于断点续爬和去重。

## 注意事项

### 1. 爬取速度
- 程序包含反爬虫措施，爬取速度较慢是正常的
- 建议在非高峰时段运行
- 可以分批次爬取，避免一次性爬取过多

### 2. 网络要求
- 需要稳定的网络连接
- 建议使用代理或VPN（如遇到IP限制）
- 程序会自动处理网络异常

### 3. 存储空间
- 每部电影约占用1-2KB存储空间
- 数千部电影约需要几MB存储空间
- 建议定期备份数据

### 4. 法律合规
- 仅用于学习和研究目的
- 请遵守豆瓣网站的使用条款
- 不要用于商业用途

## 故障排除

### 1. 爬取失败
- 检查网络连接
- 确认Python环境正确
- 查看错误信息，可能需要调整延时参数

### 2. 数据不完整
- 某些电影信息可能缺失是正常的
- 程序会自动跳过无法解析的电影
- 可以重新运行程序补充数据

### 3. 程序中断
- 程序支持断点续爬
- 重新运行时会自动跳过已爬取的电影
- 数据不会丢失

## 性能优化建议

1. **分批爬取**: 不要一次性爬取所有标签，可以分几天进行
2. **调整延时**: 如果网络较好，可以适当减少延时参数
3. **使用代理**: 如果遇到IP限制，可以使用代理服务器
4. **定期清理**: 定期清理已爬取URL文件，避免文件过大

## 技术支持

如果遇到问题，请检查：
1. Python版本（建议3.7+）
2. 依赖包是否正确安装
3. 网络连接是否正常
4. 豆瓣网站是否可访问

## 更新日志

- v1.0: 初始版本，支持基本爬取功能
- v1.1: 添加断点续爬功能
- v1.2: 优化反爬虫措施
- v1.3: 增加统计信息显示 